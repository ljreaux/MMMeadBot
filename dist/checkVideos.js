"use strict";var S=Object.create;var a=Object.defineProperty;var R=Object.getOwnPropertyDescriptor;var j=Object.getOwnPropertyNames;var L=Object.getPrototypeOf,k=Object.prototype.hasOwnProperty;var C=(e,t)=>{for(var n in t)a(e,n,{get:t[n],enumerable:!0})},c=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of j(t))!k.call(e,o)&&o!==n&&a(e,o,{get:()=>t[o],enumerable:!(r=R(t,o))||r.enumerable});return e};var d=(e,t,n)=>(n=e!=null?S(L(e)):{},c(t||!e||!e.__esModule?a(n,"default",{value:e,enumerable:!0}):n,e)),D=e=>c(a({},"__esModule",{value:!0}),e);var M={};C(M,{default:()=>p});module.exports=D(M);var f=require("discord.js"),i=d(require("fs")),h=d(require("rss-parser")),E=new h.default,{YOUTUBE_XML_URL:u,youtubeShenanigans:l,guildId:m}=process.env;async function p(e){let t="./recentVideo.json";try{if(!u||!l||!m)throw new Error;let r=await(await e.guilds.fetch(m)).channels.fetch(l),o=await E.parseURL(u),w=i.default.readFileSync(t),{id:g}=JSON.parse(w.toString()),{id:s,title:y,link:U,author:b}=o.items[0];if(g!==s){i.default.writeFileSync(t,JSON.stringify({id:s}));let x=new f.EmbedBuilder({title:y,url:U,timestamp:Date.now(),image:{url:`https://img.youtube.com/vi/${s.slice(9)}/maxresdefault.jpg`},author:{name:b,iconURL:"https://yt3.googleusercontent.com/quhem18O3ZxjTxeHYD4B95wluihYXG5bmdUrY-dXD7-XrUwJUndGjpnys9H4lpA-W9Pzco51pkg=s160-c-k-c0x00ffffff-no-rj",url:"https://www.youtube.com/c/ManMadeMead/?sub_confirmation=1"},footer:{text:e.user?.tag||"",iconURL:e.user?.displayAvatarURL()||""}});await r?.send({embeds:[x]})}}catch(n){console.error("Error parsing RSS feed",n);return}}
