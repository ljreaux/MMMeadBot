"use strict";var g=Object.create;var s=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var d=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty;var h=(o,n)=>{for(var r in n)s(o,r,{get:n[r],enumerable:!0})},t=(o,n,r,c)=>{if(n&&typeof n=="object"||typeof n=="function")for(let l of u(n))!b.call(o,l)&&l!==r&&s(o,l,{get:()=>n[l],enumerable:!(c=p(n,l))||c.enumerable});return o};var i=(o,n,r)=>(r=o!=null?g(d(o)):{},t(n||!o||!o.__esModule?s(r,"default",{value:o,enumerable:!0}):r,o)),v=o=>t(s({},"__esModule",{value:!0}),o);var w={};h(w,{default:()=>O});module.exports=v(w);var a=i(require("mongoose")),f=i(require("dotenv"));f.default.config();var m=process.env.MONGO_URI,e=global.mongoose;async function M(){if(!m)throw new Error("Please define the MONGODB_URI environment variable inside .env.local");if(e||(e=global.mongoose={conn:null,promise:null}),e.conn)return e.conn;if(!e.promise){let o={bufferCommands:!1};e.promise=a.default.connect(m,o).then(n=>(console.log("Db connected"),n))}try{e.conn=await e.promise}catch(o){throw e.promise=null,o}return e.conn}var O=M;
