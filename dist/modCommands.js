"use strict";var m=Object.create;var i=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var f=Object.getOwnPropertyNames;var y=Object.getPrototypeOf,k=Object.prototype.hasOwnProperty;var w=(n,e)=>{for(var o in e)i(n,o,{get:e[o],enumerable:!0})},l=(n,e,o,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let t of f(e))!k.call(n,t)&&t!==o&&i(n,t,{get:()=>e[t],enumerable:!(r=p(e,t))||r.enumerable});return n};var v=(n,e,o)=>(o=n!=null?m(y(n)):{},l(e||!n||!n.__esModule?i(o,"default",{value:n,enumerable:!0}):o,n)),b=n=>l(i({},"__esModule",{value:!0}),n);var A={};w(A,{autoMod:()=>S,kickOrBanUser:()=>V,registerVideo:()=>B,sendBotMessage:()=>C});module.exports=b(A);var a=require("discord.js");var c=v(require("mongoose")),g=new c.default.Schema({command:{type:String,required:!0},response:{type:String,required:!0}}),u=c.default.models.video||c.default.model("video",g);var M=15,x=["@everyone","@here"],d=n=>n.member?.permissionsIn(n.channel.id).has(a.PermissionsBitField.Flags.Administrator)||n.member?.permissionsIn(n.channel.id).has(a.PermissionsBitField.Flags.ModerateMembers),V=(n,e)=>{let o=e.includes("kick")?"kick":"ban";if(!d(n))return n.channel.send("Nice try, but you don't have the power");let[,r]=e.split(" ");if(!r)return n.channel.send(`You need to specify a user to ${o}.`);let t=n.mentions.users.first();return t?(o==="kick"?n.guild?.members.kick(t):n.guild?.members.ban(t),n.channel.send(`${t.tag} has been ${o}ed.`)):n.channel.send("User not found.")},S=n=>{let e=n.content.toLowerCase(),{member:o}=n;if(d(n))return!1;let r=(t,s)=>typeof t=="string"?s.includes(t):t.test(s);for(let t of x){let s=r(t,e);if(s)return o?.timeout(M*60*1e3),s}return!1},C=async(n,e)=>{if(!d(n))return n.channel.send("Nice try, but you don't have the power");let[,o,...r]=n.content.split(/[ ,]+/),t=o.slice(2,o.length-1),s=e(t),h=r.join(" ").trim();s&&s.send(h)},$=async n=>{let{command:e,response:o}=n,t=await new u({command:e,response:o}).save();return{command:t.command,response:t.response,id:t._id.toString()}},B=async n=>{if(!d(n))return n.channel.send("Nice try, but you don't have the power");let[,e]=n.content.split(" "),o=n.attachments.first();if(!o||!e)return n.channel.send("Please provide a video attachment and command name.");let r=o.url,t=`!video ${e}`;return await $({command:t,response:r})?n.channel.send(`${e} has been successfully added.`):n.channel.send("Something went wrong.")};0&&(module.exports={autoMod,kickOrBanUser,registerVideo,sendBotMessage});
