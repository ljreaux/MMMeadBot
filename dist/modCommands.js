"use strict";var u=Object.create;var c=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var f=Object.getOwnPropertyNames;var b=Object.getPrototypeOf,k=Object.prototype.hasOwnProperty;var v=(e,n)=>{for(var o in n)c(e,o,{get:n[o],enumerable:!0})},m=(e,n,o,r)=>{if(n&&typeof n=="object"||typeof n=="function")for(let t of f(n))!k.call(e,t)&&t!==o&&c(e,t,{get:()=>n[t],enumerable:!(r=p(n,t))||r.enumerable});return e};var y=(e,n,o)=>(o=e!=null?u(b(e)):{},m(n||!e||!e.__esModule?c(o,"default",{value:e,enumerable:!0}):o,e)),w=e=>m(c({},"__esModule",{value:!0}),e);var A={};v(A,{autoMod:()=>S,kickOrBanUser:()=>V,listAdminCommands:()=>$,registerVideo:()=>T,sendBotMessage:()=>C});module.exports=w(A);var a=require("discord.js");var d=y(require("mongoose")),g=new d.default.Schema({command:{type:String,required:!0},response:{type:String,required:!0}}),l=d.default.models.video||d.default.model("video",g);var M=15,x=["@everyone","@here"],i=e=>e.member?.permissionsIn(e.channel.id).has(a.PermissionsBitField.Flags.Administrator)||e.member?.permissionsIn(e.channel.id).has(a.PermissionsBitField.Flags.ModerateMembers),V=(e,n)=>{let o=n.includes("kick")?"kick":"ban";if(!i(e))return e.channel.send("Nice try, but you don't have the power");let[,r]=n.split(" ");if(!r)return e.channel.send(`You need to specify a user to ${o}.`);let t=e.mentions.users.first();return t?(o==="kick"?e.guild?.members.kick(t):e.guild?.members.ban(t),e.channel.send(`${t.tag} has been ${o}ed.`)):e.channel.send("User not found.")},S=e=>{let n=e.content.toLowerCase(),{member:o}=e;if(i(e))return!1;let r=(t,s)=>typeof t=="string"?s.includes(t):t.test(s);for(let t of x){let s=r(t,n);if(s)return o?.timeout(M*60*1e3),s}return!1},C=async(e,n)=>{if(!i(e))return e.channel.send("Nice try, but you don't have the power");let[,o,...r]=e.content.split(/[ ,]+/),t=o.slice(2,o.length-1),s=n(t),h=r.join(" ").trim();s&&s.send(h)},B=async e=>{let{command:n,response:o}=e,t=await new l({command:n,response:o}).save();return{command:t.command,response:t.response,id:t._id.toString()}},T=async e=>{if(!i(e))return e.channel.send("Nice try, but you don't have the power");let[,n]=e.content.split(" "),o=e.attachments.first();if(!o||!n)return e.channel.send("Please provide a video attachment and command name.");let r=o.url,t=`!video ${n}`;return await B({command:t,response:r})?e.channel.send(`${n} has been successfully added.`):e.channel.send("Something went wrong.")},$=e=>{if(i(e))return e.channel.send("Here are all the admin commands:\n1. ?kick `@user`\n2. ?ban `@user`\n3. ?registerVideo `video name` (attach video to message)\n4. To send a message from the bot, enter the following separated by spaces:\n  - `@MMMeadBot`\n  - `#channel-name`\n  - Your Message\n5. To add new commands visit the [admin dashboard.](https://mmmeadbot-admin-dashboard.vercel.app/)\n   ")};0&&(module.exports={autoMod,kickOrBanUser,listAdminCommands,registerVideo,sendBotMessage});
