"use strict";var b=Object.create;var a=Object.defineProperty;var x=Object.getOwnPropertyDescriptor;var M=Object.getOwnPropertyNames;var k=Object.getPrototypeOf,S=Object.prototype.hasOwnProperty;var V=(e,n)=>{for(var r in n)a(e,r,{get:n[r],enumerable:!0})},u=(e,n,r,o)=>{if(n&&typeof n=="object"||typeof n=="function")for(let t of M(n))!S.call(e,t)&&t!==r&&a(e,t,{get:()=>n[t],enumerable:!(o=x(n,t))||o.enumerable});return e};var m=(e,n,r)=>(r=e!=null?b(k(e)):{},u(n||!e||!e.__esModule?a(r,"default",{value:e,enumerable:!0}):r,e)),C=e=>u(a({},"__esModule",{value:!0}),e);var D={};V(D,{autoMod:()=>N,kickOrBanUser:()=>E,listAdminCommands:()=>A,refreshDv10:()=>P,refreshShadowHive:()=>_,registerVideo:()=>B,sendBotMessage:()=>U});module.exports=C(D);var h=require("discord.js");var c=m(require("mongoose")),T=new c.default.Schema({command:{type:String,required:!0},response:{type:String,required:!0}}),p=c.default.models.video||c.default.model("video",T);var f=m(require("fs")),g="https://cloudinary-dv10-api.vercel.app/api/list-media",w="https://shadowhive-api.vercel.app/api/list-media",d=async e=>{try{let n=await fetch(e);if(!n.ok)throw new Error(`Failed to fetch images: ${n.statusText}`);return(await n.json()).resources.filter(t=>t.secure_url).map(t=>t.secure_url)}catch(n){return console.error("Error fetching Cloudinary images:",n),[]}},l=async(e,n)=>{try{let r=e.join(`
`);f.default.writeFileSync(n,r),console.log(`Images written to ${n}`)}catch(r){console.error("Error writing to file:",r)}};var F=15,I=["@everyone","@here"],i=e=>e.member?.permissionsIn(e.channel.id).has(h.PermissionsBitField.Flags.Administrator)||e.member?.permissionsIn(e.channel.id).has(h.PermissionsBitField.Flags.ModerateMembers),E=e=>{let n=e.content,r=n.includes("kick")?"kick":"ban";if(!i(e))return e.channel.send("Nice try, but you don't have the power");let[,o]=n.split(" ");if(!o)return e.channel.send(`You need to specify a user to ${r}.`);let t=e.mentions.users.first();return t?(r==="kick"?e.guild?.members.kick(t):e.guild?.members.ban(t),e.channel.send(`${t.tag} has been ${r}ed.`)):e.channel.send("User not found.")},N=e=>{let n=e.content.toLowerCase(),{member:r}=e;if(i(e))return!1;let o=(t,s)=>typeof t=="string"?s.includes(t):t.test(s);for(let t of I){let s=o(t,n);if(s)return r?.timeout(F*60*1e3),s}return!1},U=async e=>{if(!i(e))return e.channel.send("Nice try, but you don't have the power");let n=v=>e.client.channels.cache.get(v),[,r,...o]=e.content.split(/[ ,]+/),t=r.slice(2,r.length-1),s=n(t),y=o.join(" ").trim();s&&s.send(y)},$=async e=>{let{command:n,response:r}=e,t=await new p({command:n,response:r}).save();return{command:t.command,response:t.response,id:t._id.toString()}},B=async e=>{if(!i(e))return e.channel.send("Nice try, but you don't have the power");let[,n]=e.content.split(" "),r=e.attachments.first();if(!r||!n)return e.channel.send("Please provide a video attachment and command name.");let o=r.url,t=`!video ${n}`;return await $({command:t,response:o})?e.channel.send(`${n} has been successfully added.`):e.channel.send("Something went wrong.")},P=async e=>{if(!i(e))return e.channel.send("Nice try, but you don't have the power");let n=await d(g);return await l(n,"images.txt"),e.channel.send("DV10 file has been refreshed.")},_=async e=>{if(!i(e))return e.channel.send("Nice try, but you don't have the power");let n=await d(w);return await l(n,"shadowhive.txt"),e.channel.send("Shadowhive file has been refreshed.")},A=e=>{if(i(e))return e.channel.send("Here are all the admin commands:\n1. ?kick `@user`\n2. ?ban `@user`\n3. ?registerVideo `video name` (attach video to message)\n4. To send a message from the bot, enter the following separated by spaces:\n  - `@MMMeadBot`\n  - `#channel-name`\n  - Your Message\n5. To add new commands visit the [admin dashboard.](https://mmmeadbot-admin-dashboard.vercel.app/)\n6. To refresh the DV10 file, use the command:\n  - `!refreshDv10`\n   ")};0&&(module.exports={autoMod,kickOrBanUser,listAdminCommands,refreshDv10,refreshShadowHive,registerVideo,sendBotMessage});
