"use strict";var p=Object.create;var c=Object.defineProperty;var f=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var k=Object.getPrototypeOf,w=Object.prototype.hasOwnProperty;var v=(e,n)=>{for(var t in n)c(e,t,{get:n[t],enumerable:!0})},l=(e,n,t,r)=>{if(n&&typeof n=="object"||typeof n=="function")for(let o of y(n))!w.call(e,o)&&o!==t&&c(e,o,{get:()=>n[o],enumerable:!(r=f(n,o))||r.enumerable});return e};var b=(e,n,t)=>(t=e!=null?p(k(e)):{},l(n||!e||!e.__esModule?c(t,"default",{value:e,enumerable:!0}):t,e)),M=e=>l(c({},"__esModule",{value:!0}),e);var T={};v(T,{autoMod:()=>C,kickOrBanUser:()=>V,registerVideo:()=>B,sendBotMessage:()=>S});module.exports=M(T);var a=require("discord.js");var d=b(require("mongoose")),x=new d.default.Schema({command:{type:String,required:!0},response:{type:String,required:!0}}),u=d.default.models.video||d.default.model("video",x);var h=15,V=(e,n)=>{let t=n.includes("kick")?"kick":"ban";if(!s(e)){e.channel.send("Nice try, but you don't have the power");return}let[,r]=n.split(" ");if(!r){e.channel.send(`You need to specify a user to ${t}.`);return}let o=e.mentions.users.first();if(!o){e.channel.send("User not found.");return}t==="kick"?e.guild?.members.kick(o):e.guild?.members.ban(o),e.channel.send(`${o.tag} has been ${t}ed.`)},g=["@everyone","@here"],s=e=>e.member?.permissionsIn(e.channel.id).has(a.PermissionsBitField.Flags.Administrator)||e.member?.permissionsIn(e.channel.id).has(a.PermissionsBitField.Flags.ModerateMembers),C=(e,n)=>{let t=e.content,{member:r}=e,o=!1;return g.forEach(i=>{typeof i=="string"?t.toLowerCase().includes(i)&&!s(e)&&(r?.timeout(h*60*1e3),o=!0):i.test(t)&&!s(e)&&(r?.timeout(h*60*1e3),o=!0)}),o},S=async(e,n)=>{if(!s(e)){e.channel.send("Nice try, but you don't have the power");return}let[,t,...r]=e.content.split(/[ ,]+/),o=t.slice(2,t.length-1),i=n(o),m=r.join(" ").trim();i&&i.send(m)},$=async e=>{let{command:n,response:t}=e,o=await new u({command:n,response:t}).save();return{command:o.command,response:o.response,id:o._id.toString()}},B=async e=>{if(!s(e)){e.channel.send("Nice try, but you don't have the power");return}let[,n]=e.content.split(" "),t=e.attachments.first();if(!t||!n)return e.channel.send("Please provide a video attachment and command name.");let r=t.url,o=`!video ${n}`;return await $({command:o,response:r})?e.channel.send(`${n} has been successfully added.`):e.channel.send("Something went wrong.")};0&&(module.exports={autoMod,kickOrBanUser,registerVideo,sendBotMessage});
