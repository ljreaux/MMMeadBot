"use strict";var p=Object.create;var c=Object.defineProperty;var f=Object.getOwnPropertyDescriptor;var b=Object.getOwnPropertyNames;var k=Object.getPrototypeOf,v=Object.prototype.hasOwnProperty;var y=(e,n)=>{for(var o in n)c(e,o,{get:n[o],enumerable:!0})},l=(e,n,o,r)=>{if(n&&typeof n=="object"||typeof n=="function")for(let t of b(n))!v.call(e,t)&&t!==o&&c(e,t,{get:()=>n[t],enumerable:!(r=f(n,t))||r.enumerable});return e};var g=(e,n,o)=>(o=e!=null?p(k(e)):{},l(n||!e||!e.__esModule?c(o,"default",{value:e,enumerable:!0}):o,e)),w=e=>l(c({},"__esModule",{value:!0}),e);var F={};y(F,{autoMod:()=>S,kickOrBanUser:()=>C,listAdminCommands:()=>A,registerVideo:()=>$,sendBotMessage:()=>B});module.exports=w(F);var a=require("discord.js");var d=g(require("mongoose")),M=new d.default.Schema({command:{type:String,required:!0},response:{type:String,required:!0}}),m=d.default.models.video||d.default.model("video",M);var x=15,V=["@everyone","@here"],i=e=>e.member?.permissionsIn(e.channel.id).has(a.PermissionsBitField.Flags.Administrator)||e.member?.permissionsIn(e.channel.id).has(a.PermissionsBitField.Flags.ModerateMembers),C=e=>{let n=e.content,o=n.includes("kick")?"kick":"ban";if(!i(e))return e.channel.send("Nice try, but you don't have the power");let[,r]=n.split(" ");if(!r)return e.channel.send(`You need to specify a user to ${o}.`);let t=e.mentions.users.first();return t?(o==="kick"?e.guild?.members.kick(t):e.guild?.members.ban(t),e.channel.send(`${t.tag} has been ${o}ed.`)):e.channel.send("User not found.")},S=e=>{let n=e.content.toLowerCase(),{member:o}=e;if(i(e))return!1;let r=(t,s)=>typeof t=="string"?s.includes(t):t.test(s);for(let t of V){let s=r(t,n);if(s)return o?.timeout(x*60*1e3),s}return!1},B=async e=>{if(!i(e))return e.channel.send("Nice try, but you don't have the power");let n=u=>e.client.channels.cache.get(u),[,o,...r]=e.content.split(/[ ,]+/),t=o.slice(2,o.length-1),s=n(t),h=r.join(" ").trim();s&&s.send(h)},T=async e=>{let{command:n,response:o}=e,t=await new m({command:n,response:o}).save();return{command:t.command,response:t.response,id:t._id.toString()}},$=async e=>{if(!i(e))return e.channel.send("Nice try, but you don't have the power");let[,n]=e.content.split(" "),o=e.attachments.first();if(!o||!n)return e.channel.send("Please provide a video attachment and command name.");let r=o.url,t=`!video ${n}`;return await T({command:t,response:r})?e.channel.send(`${n} has been successfully added.`):e.channel.send("Something went wrong.")},A=e=>{if(i(e))return e.channel.send("Here are all the admin commands:\n1. ?kick `@user`\n2. ?ban `@user`\n3. ?registerVideo `video name` (attach video to message)\n4. To send a message from the bot, enter the following separated by spaces:\n  - `@MMMeadBot`\n  - `#channel-name`\n  - Your Message\n5. To add new commands visit the [admin dashboard.](https://mmmeadbot-admin-dashboard.vercel.app/)\n   ")};0&&(module.exports={autoMod,kickOrBanUser,listAdminCommands,registerVideo,sendBotMessage});
