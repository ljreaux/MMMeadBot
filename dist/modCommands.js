"use strict";var w=Object.create;var a=Object.defineProperty;var v=Object.getOwnPropertyDescriptor;var b=Object.getOwnPropertyNames;var k=Object.getPrototypeOf,x=Object.prototype.hasOwnProperty;var M=(e,n)=>{for(var r in n)a(e,r,{get:n[r],enumerable:!0})},l=(e,n,r,o)=>{if(n&&typeof n=="object"||typeof n=="function")for(let t of b(n))!x.call(e,t)&&t!==r&&a(e,t,{get:()=>n[t],enumerable:!(o=v(n,t))||o.enumerable});return e};var h=(e,n,r)=>(r=e!=null?w(k(e)):{},l(n||!e||!e.__esModule?a(r,"default",{value:e,enumerable:!0}):r,e)),V=e=>l(a({},"__esModule",{value:!0}),e);var _={};M(_,{autoMod:()=>F,kickOrBanUser:()=>E,listAdminCommands:()=>P,refreshDv10:()=>B,registerVideo:()=>$,sendBotMessage:()=>I});module.exports=V(_);var d=require("discord.js");var c=h(require("mongoose")),C=new c.default.Schema({command:{type:String,required:!0},response:{type:String,required:!0}}),u=c.default.models.video||c.default.model("video",C);var m=h(require("fs")),S="https://cloudinary-dv10-api.vercel.app/api/list-media",f=async()=>{try{let e=await fetch(S);if(!e.ok)throw new Error(`Failed to fetch images: ${e.statusText}`);return(await e.json()).resources.filter(o=>o.secure_url).map(o=>o.secure_url)}catch(e){return console.error("Error fetching Cloudinary images:",e),[]}},p=async e=>{try{let n=e.join(`
`);m.default.writeFileSync("images.txt",n),console.log("Images written to images.txt")}catch(n){console.error("Error writing to file:",n)}};var T=15,D=["@everyone","@here"],i=e=>e.member?.permissionsIn(e.channel.id).has(d.PermissionsBitField.Flags.Administrator)||e.member?.permissionsIn(e.channel.id).has(d.PermissionsBitField.Flags.ModerateMembers),E=e=>{let n=e.content,r=n.includes("kick")?"kick":"ban";if(!i(e))return e.channel.send("Nice try, but you don't have the power");let[,o]=n.split(" ");if(!o)return e.channel.send(`You need to specify a user to ${r}.`);let t=e.mentions.users.first();return t?(r==="kick"?e.guild?.members.kick(t):e.guild?.members.ban(t),e.channel.send(`${t.tag} has been ${r}ed.`)):e.channel.send("User not found.")},F=e=>{let n=e.content.toLowerCase(),{member:r}=e;if(i(e))return!1;let o=(t,s)=>typeof t=="string"?s.includes(t):t.test(s);for(let t of D){let s=o(t,n);if(s)return r?.timeout(T*60*1e3),s}return!1},I=async e=>{if(!i(e))return e.channel.send("Nice try, but you don't have the power");let n=y=>e.client.channels.cache.get(y),[,r,...o]=e.content.split(/[ ,]+/),t=r.slice(2,r.length-1),s=n(t),g=o.join(" ").trim();s&&s.send(g)},N=async e=>{let{command:n,response:r}=e,t=await new u({command:n,response:r}).save();return{command:t.command,response:t.response,id:t._id.toString()}},$=async e=>{if(!i(e))return e.channel.send("Nice try, but you don't have the power");let[,n]=e.content.split(" "),r=e.attachments.first();if(!r||!n)return e.channel.send("Please provide a video attachment and command name.");let o=r.url,t=`!video ${n}`;return await N({command:t,response:o})?e.channel.send(`${n} has been successfully added.`):e.channel.send("Something went wrong.")},B=async e=>{if(!i(e))return e.channel.send("Nice try, but you don't have the power");let n=await f();return await p(n),e.channel.send("DV10 file has been refreshed.")},P=e=>{if(i(e))return e.channel.send("Here are all the admin commands:\n1. ?kick `@user`\n2. ?ban `@user`\n3. ?registerVideo `video name` (attach video to message)\n4. To send a message from the bot, enter the following separated by spaces:\n  - `@MMMeadBot`\n  - `#channel-name`\n  - Your Message\n5. To add new commands visit the [admin dashboard.](https://mmmeadbot-admin-dashboard.vercel.app/)\n6. To refresh the DV10 file, use the command:\n  - `!refreshDv10`\n   ")};0&&(module.exports={autoMod,kickOrBanUser,listAdminCommands,refreshDv10,registerVideo,sendBotMessage});
